# MSCS631_WireShark_2
Wireshark Lab 2 - ICMP
# ICMP Lab Report
- Samrat Baral

## Experiment Overview

This lab explores ICMP messages generated by the **Ping** and **Traceroute** programs, as well as the structure of ICMP packets.


## Ouput Screenshots




![1](./screenshots/Capture-1.PNG)

![2](./screenshots/Capture-2.PNG)

![3](./screenshots/Capture-3.PNG)

![4](./screenshots/Capture-4.PNG)

![5](./screenshots/Capture-5.PNG)



## Answers to Lab Questions with Process and Analysis

### 1. What is the IP address of your host? What is the IP address of the destination host?
- **Process:** Use Wireshark to check ICMP Echo Request packets.
- **Analysis:** Example values: Source IP `192.168.1.10`, Destination IP `8.8.8.8`.

### 2. Why is it that an ICMP packet does not have source and destination port numbers?
- **Process:** Inspect ICMP packet headers in Wireshark.
- **Analysis:** ICMP is a Layer 3 protocol, and ports are only used at Layer 4 (TCP/UDP).

### 3. Examine one of the ping request packets sent by your host. What are the ICMP type and code numbers?
- **Process:** Look at the first ICMP request packet.
- **Analysis:** ICMP Type: **8**, Code: **0** (Echo Request).

### 4. Examine the corresponding ping reply packet. What are the ICMP type and code numbers?
- **Process:** Find the Echo Reply packet.
- **Analysis:** ICMP Type: **0**, Code: **0** (Echo Reply).

### 5. What is the IP address of your host? What is the IP address of the target destination host?
(Same answer as Q1).

### 6. If ICMP sent UDP packets instead, would the IP protocol number still be 01?
- **Process:** Examine IP headers.
- **Analysis:** UDP packets use protocol number **17**, not **1**.

### 7. Examine the ICMP echo packet in your screenshot. Is this different from the ICMP ping query packets in the first half of this lab?
- **Process:** Compare Echo Requests with Traceroute packets.
- **Analysis:** Traceroute uses **TTL-expired ICMP responses**.

### 8. Examine the ICMP error packet in your screenshot. What extra fields does it have?
- **Process:** Expand an ICMP error packet in Wireshark.
- **Analysis:** Extra fields include **original packet header** and first 8 bytes of payload.

### 9. Examine the last three ICMP packets received by the source host. How are these packets different from the ICMP error packets?
- **Process:** Check the last three packets.
- **Analysis:** These are Echo Replies instead of TTL Exceeded errors.

### 10. Within the tracert measurements, is there a link whose delay is significantly longer than others?
- **Process:** Analyze RTT values in Traceroute output.
- **Analysis:** Longer delay observed at **Hop 7** (example).

---

## Output Analysis

```bash
python icmp_script.py
>> 
Pinging 8.8.8.8...

Pinging 8.8.8.8 with 32 bytes of data:
Reply from 8.8.8.8: bytes=32 time=34ms TTL=53
Reply from 8.8.8.8: bytes=32 time=26ms TTL=53
Reply from 8.8.8.8: bytes=32 time=25ms TTL=53
Reply from 8.8.8.8: bytes=32 time=26ms TTL=53
Reply from 8.8.8.8: bytes=32 time=25ms TTL=53

Ping statistics for 8.8.8.8:
    Packets: Sent = 5, Received = 5, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 25ms, Maximum = 34ms, Average = 27ms
Reply from 8.8.8.8: bytes=32 time=26ms TTL=53
Reply from 8.8.8.8: bytes=32 time=25ms TTL=53
Reply from 8.8.8.8: bytes=32 time=26ms TTL=53
Reply from 8.8.8.8: bytes=32 time=25ms TTL=53

Ping statistics for 8.8.8.8:
    Packets: Sent = 5, Received = 5, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 25ms, Maximum = 34ms, Average = 27ms
Running traceroute to 8.8.8.8...

Tracing route to dns.google [8.8.8.8]
over a maximum of 30 hops:

  1     3 ms     2 ms     1 ms  SAX2V1S.lan [192.168.1.1]
  2     3 ms     4 ms     3 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  3    15 ms    15 ms    12 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  4    14 ms    21 ms   176 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  5     *        *        *     Request timed out.
  6    15 ms    16 ms    13 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  7    14 ms    14 ms    18 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
Reply from 8.8.8.8: bytes=32 time=26ms TTL=53
Reply from 8.8.8.8: bytes=32 time=25ms TTL=53
Reply from 8.8.8.8: bytes=32 time=26ms TTL=53
Reply from 8.8.8.8: bytes=32 time=25ms TTL=53

Ping statistics for 8.8.8.8:
    Packets: Sent = 5, Received = 5, Lost = 0 (0% loss),
Approximate round trip times in milli-seconds:
    Minimum = 25ms, Maximum = 34ms, Average = 27ms
Running traceroute to 8.8.8.8...

Tracing route to dns.google [8.8.8.8]
over a maximum of 30 hops:

  1     3 ms     2 ms     1 ms  SAX2V1S.lan [192.168.1.1]
  2     3 ms     4 ms     3 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  3    15 ms    15 ms    12 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  4    14 ms    21 ms   176 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  5     *        *        *     Request timed out.
  6    15 ms    16 ms    13 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  7    14 ms    14 ms    18 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  8    15 ms    23 ms    15 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  9    14 ms    15 ms    26 ms  169.254.250.250
 10    17 ms    24 ms    22 ms  lag-63.rcr01dllatx37.netops.charter.com [24.164.209.148]
 11    15 ms    22 ms    15 ms  142.251.195.176
 12    24 ms    28 ms    32 ms  172.253.78.59
 13    18 ms    17 ms    16 ms  142.251.71.113

Tracing route to dns.google [8.8.8.8]
over a maximum of 30 hops:

  1     3 ms     2 ms     1 ms  SAX2V1S.lan [192.168.1.1]
  2     3 ms     4 ms     3 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  3    15 ms    15 ms    12 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  4    14 ms    21 ms   176 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  5     *        *        *     Request timed out.
  6    15 ms    16 ms    13 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  7    14 ms    14 ms    18 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  8    15 ms    23 ms    15 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  9    14 ms    15 ms    26 ms  169.254.250.250
 10    17 ms    24 ms    22 ms  lag-63.rcr01dllatx37.netops.charter.com [24.164.209.148]
 11    15 ms    22 ms    15 ms  142.251.195.176
 12    24 ms    28 ms    32 ms  172.253.78.59
  2     3 ms     4 ms     3 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  3    15 ms    15 ms    12 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  4    14 ms    21 ms   176 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  5     *        *        *     Request timed out.
  6    15 ms    16 ms    13 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  7    14 ms    14 ms    18 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  8    15 ms    23 ms    15 ms  syn-035-146-198-007.res.spectrum.com [35.146.198.7]
  9    14 ms    15 ms    26 ms  169.254.250.250
 10    17 ms    24 ms    22 ms  lag-63.rcr01dllatx37.netops.charter.com [24.164.209.148]
 11    15 ms    22 ms    15 ms  142.251.195.176
 12    24 ms    28 ms    32 ms  172.253.78.59
 11    15 ms    22 ms    15 ms  142.251.195.176
 12    24 ms    28 ms    32 ms  172.253.78.59
```

```bash
python icmp_analysis.py
>> 
Packet No: 26
Time: 2025-02-03 01:06:09.407770
Source: 192.168.1.228, Destination: 8.8.8.8
ICMP Type: 8, Code: 0
----------------------------------------   
Packet No: 27
Time: 2025-02-03 01:06:09.437034
Source: 8.8.8.8, Destination: 192.168.1.228
ICMP Type: 0, Code: 0
----------------------------------------   
Packet No: 30
Time: 2025-02-03 01:06:10.428142
Source: 192.168.1.228, Destination: 8.8.8.8
ICMP Type: 8, Code: 0
----------------------------------------
*
* (More List)
*
Packet No: 331
Time: 2025-02-03 01:07:02.342057
Source: 192.168.1.228, Destination: 8.8.8.8
ICMP Type: 8, Code: 0
----------------------------------------
Packet No: 332
Time: 2025-02-03 01:07:02.367522
Source: 8.8.8.8, Destination: 192.168.1.228
ICMP Type: 0, Code: 0
----------------------------------------
Packet No: 333
Time: 2025-02-03 01:07:02.370764
Source: 192.168.1.228, Destination: 8.8.8.8
ICMP Type: 8, Code: 0
----------------------------------------
Packet No: 334
```
## Conclusion

This lab demonstrated how ICMP works in real-world network diagnostics. By using Wireshark, we captured and analyzed packets to understand the format and behavior of ICMP messages.
